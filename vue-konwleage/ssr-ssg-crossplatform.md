# 跨端/渲染形态：SSR / SSG / 多端

## 1. SSR（服务端渲染）

### 目的

- 首屏更快（尤其弱网）
- SEO 更友好

### 关键变化

- 组件代码会在 Node 环境执行：
  - 不能在 setup 顶层直接访问 `window/document`
  - DOM 相关逻辑放进 `onMounted`

### 常见问题

- “同构”数据获取：需要在服务端预取数据并注水（hydrate）

## 2. SSG（静态生成）

### 目的

- 构建时生成静态 HTML，部署简单
- 适合内容型站点/文档

### 关键点

- 动态数据通常在客户端再请求
- 需要考虑增量更新（ISR/重新构建）策略

## 3. 多端/跨端（概念）

Vue 生态可通过不同方案适配：

- Web（SPA/SSR/SSG）
- 小程序/原生/桌面（依赖社区/框架）

跨端核心挑战：

- 组件与 API 差异
- 路由、存储、网络、权限模型差异
- 样式与布局兼容

## 4. 迁移建议（从 SPA 出发）

- 抽离“平台相关代码”（DOM、存储、运行时 API）到 adapter 层
- 数据请求层统一封装，避免散落在组件
- 组件尽量保持纯展示 + 输入输出明确
